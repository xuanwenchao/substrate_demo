{"version":3,"file":"ColdObservable.js","sourceRoot":"","sources":["../../../../../../bak_node_modules/rxjs/src/internal/testing/ColdObservable.ts"],"names":[],"mappings":";;;AAAA,8CAA2C;AAC3C,kDAA+C;AAI/C,iEAA8D;AAC9D,qDAAkD;AAElD,kDAAsD;AAEtD,MAAa,cAAkB,SAAQ,uBAAa;IAQlD,YAAmB,QAAuB,EAAE,SAAoB;QAC9D,KAAK,CAAC,UAA+B,UAA2B;YAC9D,MAAM,UAAU,GAAsB,IAAW,CAAC;YAClD,MAAM,KAAK,GAAG,UAAU,CAAC,kBAAkB,EAAE,CAAC;YAC9C,MAAM,YAAY,GAAG,IAAI,2BAAY,EAAE,CAAC;YACxC,YAAY,CAAC,GAAG,CACd,IAAI,2BAAY,CAAC,GAAG,EAAE;gBACpB,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;YACzC,CAAC,CAAC,CACH,CAAC;YACF,UAAU,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;YACxC,OAAO,YAAY,CAAC;QACtB,CAAC,CAAC,CAAC;QAZc,aAAQ,GAAR,QAAQ,CAAe;QAPnC,kBAAa,GAAsB,EAAE,CAAC;QAoB3C,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC7B,CAAC;IAED,gBAAgB,CAAC,UAA2B;QAC1C,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;QAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,EAAE,CAAC,EAAE,EAAE;YACvC,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACjC,UAAU,CAAC,GAAG,CACZ,IAAI,CAAC,SAAS,CAAC,QAAQ,CACrB,CAAC,KAAK,EAAE,EAAE;gBACR,MAAM,EAAE,OAAO,EAAE,EAAE,YAAY,EAAE,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,KAAM,CAAC;gBACtE,IAAA,kCAAmB,EAAC,YAAY,EAAE,WAAW,CAAC,CAAC;YACjD,CAAC,EACD,OAAO,CAAC,KAAK,EACb,EAAE,OAAO,EAAE,UAAU,EAAE,CACxB,CACF,CAAC;SACH;IACH,CAAC;CACF;AAxCD,wCAwCC;AACD,IAAA,yBAAW,EAAC,cAAc,EAAE,CAAC,2CAAoB,CAAC,CAAC,CAAC","sourcesContent":["import { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { Scheduler } from '../Scheduler';\nimport { TestMessage } from './TestMessage';\nimport { SubscriptionLog } from './SubscriptionLog';\nimport { SubscriptionLoggable } from './SubscriptionLoggable';\nimport { applyMixins } from '../util/applyMixins';\nimport { Subscriber } from '../Subscriber';\nimport { observeNotification } from '../Notification';\n\nexport class ColdObservable<T> extends Observable<T> implements SubscriptionLoggable {\n  public subscriptions: SubscriptionLog[] = [];\n  scheduler: Scheduler;\n  // @ts-ignore: Property has no initializer and is not definitely assigned\n  logSubscribedFrame: () => number;\n  // @ts-ignore: Property has no initializer and is not definitely assigned\n  logUnsubscribedFrame: (index: number) => void;\n\n  constructor(public messages: TestMessage[], scheduler: Scheduler) {\n    super(function (this: Observable<T>, subscriber: Subscriber<any>) {\n      const observable: ColdObservable<T> = this as any;\n      const index = observable.logSubscribedFrame();\n      const subscription = new Subscription();\n      subscription.add(\n        new Subscription(() => {\n          observable.logUnsubscribedFrame(index);\n        })\n      );\n      observable.scheduleMessages(subscriber);\n      return subscription;\n    });\n    this.scheduler = scheduler;\n  }\n\n  scheduleMessages(subscriber: Subscriber<any>) {\n    const messagesLength = this.messages.length;\n    for (let i = 0; i < messagesLength; i++) {\n      const message = this.messages[i];\n      subscriber.add(\n        this.scheduler.schedule(\n          (state) => {\n            const { message: { notification }, subscriber: destination } = state!;\n            observeNotification(notification, destination);\n          },\n          message.frame,\n          { message, subscriber }\n        )\n      );\n    }\n  }\n}\napplyMixins(ColdObservable, [SubscriptionLoggable]);\n"]}